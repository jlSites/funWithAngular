{
  "id": "api/upgrade/static/UpgradeModule",
  "title": "UpgradeModule",
  "contents": "<article>\n  <header class=\"api-header\">\n    <h1 class=\"no-toc\" id=\"upgrademodule\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#upgrademodule\"><i class=\"material-icons\">link</i></a>UpgradeModule</h1>\n    <label class=\"api-type-label class\">class</label>\n    \n    \n    \n    <span class=\"version\"></span>\n  </header>\n\n  \n  <!-- INFO BAR -->\n<section class=\"info-bar\">\n\n<table class=\"is-full-width\">\n<tbody>\n<tr>\n  <th>npm Package</th>\n  <td><a href=\"https://www.npmjs.com/package/@angular/upgrade\">@angular/upgrade</a></td>\n</tr>\n<tr>\n  <th>Module</th>\n  <td><code>import { UpgradeModule } from <a href=\"api/upgrade/static\">@angular/upgrade/static</a>;</code></td>\n</tr>\n<tr>\n  <th>Source</th>\n  <td><a href=\"https://github.com/angular/angular/tree/4.3.0-rc.0/packages/upgrade/static/src/static/upgrade_module.ts#L16-L267\">upgrade/static/src/static/upgrade_module.ts</a></td>\n</tr>\n\n</tbody>\n</table>\n\n  \n<div class=\"what-it-does info-banner\">\n  <p><em>Part of the <a href=\"api?query=upgrade%252Fstatic\">upgrade/static</a>\nlibrary for hybrid upgrade apps that support AoT compilation</em></p>\n<p>Allows AngularJS and Angular components to be used together inside a hybrid upgrade\napplication, which supports AoT compilation.</p>\n<p>Specifically, the classes and functions in the <code><a href=\"api/upgrade/static\">upgrade/static</a></code> module allow the following:\n1. Creation of an Angular directive that wraps and exposes an AngularJS component so\nthat it can be used in an Angular template. See <a href=\"api/upgrade/static/UpgradeComponent\"><code><a href=\"api/upgrade/static/UpgradeComponent\">UpgradeComponent</a></code></a>.\n2. Creation of an AngularJS directive that wraps and exposes an Angular component so\nthat it can be used in an AngularJS template. See <a href=\"api/upgrade/static/downgradeComponent\"><code><a href=\"api/upgrade/static/downgradeComponent\">downgradeComponent</a></code></a>.\n3. Creation of an Angular root injector provider that wraps and exposes an AngularJS\nservice so that it can be injected into an Angular context. See\n<a href=\"api/upgrade/static/UpgradeModule#upgrading-an-angular-1-service\">Upgrading an AngularJS service</a> below.\n4. Creation of an AngularJS service that wraps and exposes an Angular injectable\nso that it can be injected into an AngularJS context. See <a href=\"api/upgrade/static/downgradeInjectable\"><code><a href=\"api/upgrade/static/downgradeInjectable\">downgradeInjectable</a></code></a>.\n3. Bootstrapping of a hybrid Angular application which contains both of the frameworks\ncoexisting in a single application. See the\n<a href=\"api/upgrade/static/UpgradeModule#example\">example</a> below.</p>\n<h2 id=\"mental-model\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#mental-model\"><i class=\"material-icons\">link</i></a>Mental Model</h2>\n<p>When reasoning about how a hybrid application works it is useful to have a mental model which\ndescribes what is happening and explains what is happening at the lowest level.</p>\n<ol>\n<li>There are two independent frameworks running in a single application, each framework treats\nthe other as a black box.</li>\n<li>Each DOM element on the page is owned exactly by one framework. Whichever framework\ninstantiated the element is the owner. Each framework only updates/interacts with its own\nDOM elements and ignores others.</li>\n<li>AngularJS directives always execute inside the AngularJS framework codebase regardless of\nwhere they are instantiated.</li>\n<li>Angular components always execute inside the Angular framework codebase regardless of\nwhere they are instantiated.</li>\n<li>An AngularJS component can be \"upgraded\"\" to an Angular component. This is achieved by\ndefining an Angular directive, which bootstraps the AngularJS component at its location\nin the DOM. See <a href=\"api/upgrade/static/UpgradeComponent\"><code><a href=\"api/upgrade/static/UpgradeComponent\">UpgradeComponent</a></code></a>.</li>\n<li>An Angular component can be \"downgraded\"\" to an AngularJS component. This is achieved by\ndefining an AngularJS directive, which bootstraps the Angular component at its location\nin the DOM. See <a href=\"api/upgrade/static/downgradeComponent\"><code><a href=\"api/upgrade/static/downgradeComponent\">downgradeComponent</a></code></a>.</li>\n<li>Whenever an \"upgraded\"/\"downgraded\" component is instantiated the host element is owned by\nthe framework doing the instantiation. The other framework then instantiates and owns the\nview for that component.\na. This implies that the component bindings will always follow the semantics of the\ninstantiation framework.\nb. The DOM attributes are parsed by the framework that owns the current template. So\nattributes\nin AngularJS templates must use kebab-case, while AngularJS templates must use camelCase.\nc. However the template binding syntax will always use the Angular style, e.g. square\nbrackets (<code>[...]</code>) for property binding.</li>\n<li>AngularJS is always bootstrapped first and owns the root component.</li>\n<li>The new application is running in an Angular zone, and therefore it no longer needs calls\nto\n<code>$apply()</code>.</li>\n</ol>\n\n</div>\n\n  \n  \n  <section class=\"class-overview\">\n<h2 id=\"overview\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#overview\"><i class=\"material-icons\">link</i></a>Overview</h2>\n<code-example language=\"ts\" hidecopy=\"true\">\nclass UpgradeModule {\n  <a class=\"code-anchor\" href=\"api/upgrade/static/UpgradeModule#$injector\">$injector: any</a>\n  <a class=\"code-anchor\" href=\"api/upgrade/static/UpgradeModule#injector\">injector: Injector</a>\n  <a class=\"code-anchor\" href=\"api/upgrade/static/UpgradeModule#ngZone\">ngZone: NgZone</a>\n  <a class=\"code-anchor\" href=\"api/upgrade/static/UpgradeModule#bootstrap\">bootstrap(element: Element, modules: string[], config?: any)</a>\n}\n</code-example>\n</section>\n\n  \n<section class=\"how-to-use\">\n  <h2 id=\"how-to-use\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#how-to-use\"><i class=\"material-icons\">link</i></a>How To Use</h2>\n  <p><code>import {UpgradeModule} from '@angular/upgrade/static';</code></p>\n<h2 id=\"example\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#example\"><i class=\"material-icons\">link</i></a>Example</h2>\n<p>Import the <a href=\"api/upgrade/static/UpgradeModule\"><code><a href=\"api/upgrade/static/UpgradeModule\">UpgradeModule</a></code></a> into your top level <a href=\"api/core/NgModule\">Angular `NgModule`</a>.</p>\n<code-example>\n// This NgModule represents the Angular pieces of the application\n@NgModule({\n  declarations: [Ng2HeroesComponent, Ng1HeroComponentWrapper],\n  providers: [\n    HeroesService,\n    // Register an Angular provider whose value is the \"upgraded\" AngularJS service\n    {provide: 'titleCase', useFactory: (i: any) => i.get('titleCase'), deps: ['$injector']}\n  ],\n  // All components that are to be \"downgraded\" must be declared as `entryComponents`\n  entryComponents: [Ng2HeroesComponent],\n  // We must import `UpgradeModule` to get access to the AngularJS core services\n  imports: [BrowserModule, UpgradeModule]\n})\nclass Ng2AppModule {\n  ngDoBootstrap() { /* this is a placeholder to stop the boostrapper from complaining */\n  }\n}\n\n</code-example>\n<p>Then bootstrap the hybrid upgrade app's module, get hold of the <a href=\"api/upgrade/static/UpgradeModule\"><code><a href=\"api/upgrade/static/UpgradeModule\">UpgradeModule</a></code></a> instance\nand use it to bootstrap the top level <a href=\"https://docs.angularjs.org/api/ng/type/angular.Module\">AngularJS\nmodule</a>.</p>\n<code-example>\n// First we bootstrap the Angular HybridModule\n// (We are using the dynamic browser platform as this example has not been compiled AoT)\nplatformBrowserDynamic().bootstrapModule(Ng2AppModule).then(ref => {\n  // Once Angular bootstrap is complete then we bootstrap the AngularJS module\n  const upgrade = ref.injector.get(UpgradeModule) as UpgradeModule;\n  upgrade.bootstrap(document.body, [ng1AppModule.name]);\n});\n\n</code-example>\n<a id=\"upgrading-an-angular-1-service\"></a>\n<h2 id=\"upgrading-an-angularjs-service\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#upgrading-an-angularjs-service\"><i class=\"material-icons\">link</i></a>Upgrading an AngularJS service</h2>\n<p>There is no specific API for upgrading an AngularJS service. Instead you should just follow the\nfollowing recipe:</p>\n<p>Let's say you have an AngularJS service:</p>\n<code-example>\n// This AngularJS service will be \"upgraded\" to be used in Angular\nng1AppModule.factory(\n    'titleCase',\n    () => (value: string) => value.replace(/((^|\\s)[a-z])/g, (_, c) => c.toUpperCase()));\n\n</code-example>\n<p>Then you should define an Angular provider to be included in your <a href=\"api/core/NgModule\"><code><a href=\"api/core/NgModule\">NgModule</a></code></a> <code>providers</code>\nproperty.</p>\n<code-example>\n// Register an Angular provider whose value is the \"upgraded\" AngularJS service\n{provide: 'titleCase', useFactory: (i: any) => i.get('titleCase'), deps: ['$injector']}\n\n</code-example>\n<p>Then you can use the \"upgraded\" AngularJS service by injecting it into an Angular component\nor service.</p>\n<code-example>\nconstructor(@Inject('titleCase') titleCase: (v: string) => string) {\n  // Change all the hero names to title case, using the \"upgraded\" AngularJS service\n  this.heroes.forEach((hero: Hero) => hero.name = titleCase(hero.name));\n}\n\n</code-example>\n\n</section>\n\n\n  \n\n\n<section class=\"description\">\n  <h2 id=\"description\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#description\"><i class=\"material-icons\">link</i></a>Description</h2>\n  <p>This class is an <code><a href=\"api/core/NgModule\">NgModule</a></code>, which you import to provide AngularJS core services,\nand has an instance method used to bootstrap the hybrid upgrade application.</p>\n<h2 id=\"core-angularjs-services\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#core-angularjs-services\"><i class=\"material-icons\">link</i></a>Core AngularJS services</h2>\n<p>Importing this <a href=\"api/core/NgModule\"><code><a href=\"api/core/NgModule\">NgModule</a></code></a> will add providers for the core\n<a href=\"https://docs.angularjs.org/api/ng/service\">AngularJS services</a> to the root injector.</p>\n<h2 id=\"bootstrap\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#bootstrap\"><i class=\"material-icons\">link</i></a>Bootstrap</h2>\n<p>The runtime instance of this class contains a <a href=\"api/upgrade/static/UpgradeModule#bootstrap\">`bootstrap()`</a>\nmethod, which you use to bootstrap the top level AngularJS module onto an element in the\nDOM for the hybrid upgrade app.</p>\n<p>It also contains properties to access the <a href=\"api/upgrade/static/UpgradeModule#injector\">root injector</a>, the\nbootstrap <a href=\"api/core/NgZone\"><code><a href=\"api/core/NgZone\">NgZone</a></code></a> and the\n<a href=\"https://docs.angularjs.org/api/auto/service/$injector\">AngularJS $injector</a>.</p>\n\n</section>\n\n\n\n\n\n<section class=\"constructor\">\n  <a id=\"constructor\"></a>\n  <h2 id=\"constructor\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#constructor\"><i class=\"material-icons\">link</i></a>Constructor</h2>\n  <code-example hidecopy=\"true\" class=\"no-box api-heading\">constructor(injector: Injector, ngZone: NgZone)</code-example>\n  \n</section>\n\n\n\n\n<section class=\"instance-members\">\n  <h2 id=\"members\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#members\"><i class=\"material-icons\">link</i></a>Members</h2>\n  \n    <div class=\"instance-member\">\n  <a id=\"$injector\"></a>\n  <code-example hidecopy=\"true\" class=\"no-box api-heading\">$injector: any</code-example>\n  <p>The AngularJS <code>$injector</code> for the upgrade application.</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"injector\"></a>\n  <code-example hidecopy=\"true\" class=\"no-box api-heading\">injector: Injector</code-example>\n  <p>The Angular Injector *</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"ngZone\"></a>\n  <code-example hidecopy=\"true\" class=\"no-box api-heading\">ngZone: NgZone</code-example>\n  <p>The bootstrap zone for the upgrade application</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bootstrap\"></a>\n  <code-example hidecopy=\"true\" class=\"no-box api-heading\">bootstrap(element: Element, modules: string[], config?: any)</code-example>\n  <p>Bootstrap an AngularJS application from this NgModule</p>\n\n  </div>\n\n    \n    \n  \n</section>\n\n\n\n<section class=\"annotations\">\n  <h2 id=\"annotations\"><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/upgrade/static/UpgradeModule#annotations\"><i class=\"material-icons\">link</i></a>Annotations</h2>\n    <code-example hidecopy=\"true\" class=\"no-box api-heading\">@NgModule({providers: [angular1Providers]})</code-example>\n    \n  \n</section>\n\n\n\n\n\n\n</section></article>"
}